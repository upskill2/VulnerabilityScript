package com.scripts;

import com.scripts.model.VulnerabilityScript;
import com.scripts.planner.ScriptExecutionPlanner;

import java.util.Collections;
import java.util.List;
import java.util.logging.Logger;

public class ScriptRunner {
    private static final Logger log = Logger.getLogger (ScriptRunner.class.getName ());

    public static void main (String[] args) throws InterruptedException {
        log.info ("Starting ScriptRunner");

        List<VulnerabilityScript> scripts = List.of (
                new VulnerabilityScript (5, List.of (1, 2)),
                new VulnerabilityScript (1, List.of (2, 3, 4)),
                new VulnerabilityScript (4, Collections.emptyList ()),
                new VulnerabilityScript (2, List.of (4)),
                new VulnerabilityScript (3, List.of (2))
        );

        log.info ("\n" + "-------------------------------------------------");
        log.info (String.format ("Scripts and dependencies are: %s", scripts));
        log.info ("\n" + "-------------------------------------------------");

        Thread.sleep (1000); // Simulate some processing time
        ScriptExecutionPlanner planner = new ScriptExecutionPlanner ();
        List<Integer> executionOrder = planner.getExecutionOrder (scripts);
        log.info (String.format ("Execution Order: %s", executionOrder));
    }

}
